screenCanvas As screen:
    OnVisible: |
        =Set(navigationKey,0);
        Set(currentCategory,"");
        Set(answerList,'仮説構築支援ツール - 回答');
        Set(themeId,galleryTheme.Selected.ID);
        Set(pageKey,"canvas");

    MainContainer2 As groupContainer.manualLayoutContainer:
        Height: =Max(App.Height, App.MinScreenHeight)
        Width: =Max(App.Width, App.MinScreenWidth)
        ZIndex: =38

        cmHeader_2 As cmHeader:

        BodyContainer1 As groupContainer.manualLayoutContainer:
            Height: =MainContainer.Height-cmHeader_1.Height-HeaderContainer.Height
            Width: =Max(App.Width, App.MinScreenWidth)-NavigateContainer.Width
            Y: =cmHeader_1.Height+HeaderContainer.Height
            ZIndex: =2

            Icon1 As icon.BackArrow:
                Color: =baseColor
                Height: =40
                Icon: =Icon.BackArrow
                OnSelect: =Navigate(screenTheme,Fade)
                Tooltip: ="テーマ一覧へ戻る"
                Width: =40
                X: =32
                Y: =568
                ZIndex: =1

            "Gallery1 As gallery.'BrowseLayout_Vertical_TwoTextOneImageVariant_ver4.0'":
                Height: =536
                Items: =Sort(Filter(answerList,And(themeID=themeId)),questionID)
                Layout: =Layout.Vertical
                TemplatePadding: =0
                TemplateSize: =156
                Width: =1005
                X: =84
                Y: =40
                ZIndex: =2

                Separator1 As rectangle:
                    Height: =1
                    OnSelect: =Select(Parent)
                    Width: =Parent.TemplateWidth
                    Y: =Parent.TemplateHeight - 1
                    ZIndex: =5

                Label1 As label:
                    Height: =51
                    OnSelect: =Select(Parent)
                    Overflow: =Overflow.Scroll
                    Text: =ThisItem.answer
                    Width: =961
                    X: =7
                    Y: =67
                    ZIndex: =6

                Label4 As label:
                    OnSelect: =Select(Parent)
                    Text: =Concatenate("後で答える：",If(ThisItem.skip_flag,"✔"))
                    X: =Label1.X
                    Y: =116
                    ZIndex: =8

                Label6 As label:
                    OnSelect: =Select(Parent)
                    Text: =Concatenate("回答しない：",If(ThisItem.no_answer_flag,"✔"))
                    Visible: =If(LookUp(questionList,ID=ThisItem.questionID).required="2",true)
                    X: =180
                    Y: =116
                    ZIndex: =9

                Label7 As label:
                    FontWeight: =FontWeight.Semibold
                    OnSelect: =Select(Parent)
                    Text: =Concatenate(LookUp(questionList,ID=ThisItem.questionID).category,LookUp(questionList,ID=ThisItem.questionID).current_question_number)
                    Width: =487
                    Y: =1
                    ZIndex: =10

                Label3_1 As label:
                    Color: =RGBA(255, 255, 255, 1)
                    Fill: =RGBA(220, 153, 153, 1)
                    FontWeight: =Semibold
                    Height: =26
                    OnSelect: =Select(Parent)
                    Size: =10
                    Text: ="必須"
                    Visible: =If(Not(LookUp(questionList,ID=ThisItem.questionID).required="2"),true)
                    Width: =46
                    X: =7
                    Y: =41
                    ZIndex: =11

                statusLabel As label:
                    Align: =Center
                    BorderColor: =baseColor
                    BorderThickness: =2
                    Fill: |
                        =If(ThisItem.status = 10,baseColor,ThisItem.status = 2,RGBA(200, 220, 255, 1),White)
                        //Set(baseColor,RGBA(100, 149, 237, 1));
                    OnSelect: =Select(Parent)
                    Text: =ThisItem.status
                    Width: =40
                    X: =900
                    Y: =20
                    ZIndex: =12

        NavigateContainer As groupContainer.manualLayoutContainer:
            Height: =BodyContainer1.Height
            Width: =MainContainer2.Width/6
            X: =MainContainer2.Width-MainContainer2.Width/6
            Y: =BodyContainer1.Y
            ZIndex: =4

            cmNavigation_1 As cmNavigation:
                Height: =455
                setQuestionValue: |-
                    =Set(
                        navigationKey,
                        qId
                    );
                    Set(
                        questionKey,
                        qId
                    );
                    With({getAnswerRecord:LookUp('仮説構築支援ツール - 回答',And(themeID=themeId,questionID=questionKey))},
                    Reset(textAnswer);
                    Reset(skipAnswerCheckbox);
                    Reset(noAnswerCheckbox);
                    Set(
                        currentAnswer,
                        If(IsBlank(getAnswerRecord),"",getAnswerRecord.answer)
                        );
                    Set(
                        skipFlag,
                        getAnswerRecord.skip_flag
                        );
                    Set(
                        noAnswerFlag,
                        getAnswerRecord.no_answer_flag
                        );
                    );
                    
                    With({qRecord:LookUp(questionList, ID=questionKey)},
                    Set(
                        currentTitle,
                        qRecord.Title
                    );
                    Set(
                        currentQuestion,
                        qRecord.question_content
                    );
                    Set(currentCategory,qRecord.category);
                    Set(
                        controlType,
                        qRecord.control_type
                    );
                    Set(
                        currentPage,
                        qRecord.current_question_number
                    );
                    Set(
                        totalPage,
                        qRecord.question_totalnumber
                    );
                    Set(
                        commentary,
                        qRecord.commentary
                    );
                    Set(
                        example,
                        qRecord.example
                    );
                    Set(
                        currentRequired,
                        qRecord.required
                    );
                    Set(
                        nextVisible,
                        If(qRecord.next_question_id=0,false,true)
                    
                    );
                    Set(
                        confirmVisible,
                        If(qRecord.next_question_id=0,true,false)
                    );
                    );
                    Set(
                        backVisible,
                        false
                    );
                    Set(
                        commentaryGroupVisible,
                        true
                    );
                    Set(
                        exampleGroupVisible,
                        false
                    );
                    If(Not(currentRequired="2"),Set(currentQuestion,Concatenate(currentQuestion,"*")))
                ZIndex: =1

        HeaderContainer As groupContainer.manualLayoutContainer:
            Height: =66
            Width: =MainContainer2.Width
            Y: =cmHeader_2.Height
            ZIndex: =6

            lineContainer2_1 As groupContainer.verticalAutoLayoutContainer:
                Height: =66
                LayoutDirection: =LayoutDirection.Vertical
                LayoutMode: =LayoutMode.Auto
                Width: =HeaderContainer.Width
                X: =30
                ZIndex: =1

                Label2_3 As label:
                    FontWeight: =FontWeight.Bold
                    Height: =44
                    Size: =16
                    Text: ="Ｑ&Ａフローシステム"
                    Width: =400
                    X: =50
                    Y: =461
                    ZIndex: =1

                Rectangle3_3 As rectangle:
                    BorderColor: =baseColor
                    Fill: =baseColor
                    Height: =4
                    Width: =Max(App.Width-60, App.MinScreenWidth-60)
                    X: =50
                    Y: =505
                    ZIndex: =2

            statusBar_2 As cmStatusBar:
                Width: =600
                X: =HeaderContainer.Width/3
                ZIndex: =2

