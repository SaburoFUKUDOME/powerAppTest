screenCanvas As screen:
    OnVisible: |-
        =Set(themeId,galleryTheme.Selected.ID);
        Set(navigationKey,0);
        Set(answerList,'仮説構築支援ツール - 回答');

    cmHeader_2 As cmHeader:
        ZIndex: =7

    questionHeaderGroup_1 As group:
        Height: =5
        Width: =5
        X: =20
        Y: =20
        ZIndex: =11

        headerLabel_2 As rectangle:
            BorderColor: =RGBA(0, 0, 0, 0)
            Fill: =baseColor
            Height: =7
            Width: =Max(App.Width-100, App.MinScreenWidth-100)
            X: =40
            Y: =139
            ZIndex: =9

        titleLabel_2 As label:
            FontWeight: =Bold
            Height: =61
            Size: =14
            Text: ="Q＆Aフローシステム"
            Width: =427
            X: =40
            Y: =88
            ZIndex: =10

    cmHomeButtonView_1 As cmHomeButtonView:
        X: =1106
        Y: =128
        ZIndex: =32

    Icon1 As icon.BackArrow:
        Color: =baseColor
        Height: =40
        Icon: =Icon.BackArrow
        OnSelect: =Back()
        Width: =40
        X: =40
        Y: =696
        ZIndex: =34

    "Gallery1 As gallery.'BrowseLayout_Vertical_TwoTextOneImageVariant_ver4.0'":
        Height: =536
        Items: =Sort(Filter(answerList,And(themeID=galleryTheme.Selected.ID)),questionID)
        Layout: =Layout.Vertical
        TemplatePadding: =0
        TemplateSize: =Min(110, Self.Height - 60)
        Width: =978
        X: =108
        Y: =160
        ZIndex: =35

        Separator1 As rectangle:
            Height: =1
            OnSelect: =Select(Parent)
            Width: =Parent.TemplateWidth
            Y: =Parent.TemplateHeight - 1
            ZIndex: =5

        Label1 As label:
            Height: =49
            OnSelect: =Select(Parent)
            Text: =ThisItem.answer
            Width: =978
            ZIndex: =6

        Label3 As label:
            OnSelect: =Select(Parent)
            Text: =If(Not(LookUp(questionList,ThisItem.questionID=ID).required="2"),"必須")
            X: =4
            Y: =59
            ZIndex: =7

        Label4 As label:
            OnSelect: =Select(Parent)
            Text: =If(ThisItem.skip_flag,"後で答える")
            X: =150
            Y: =59
            ZIndex: =8

        Label6 As label:
            OnSelect: =Select(Parent)
            Text: =If(ThisItem.no_answer_flag,"回答しない")
            X: =330
            Y: =59
            ZIndex: =9

    cmNavigation_1 As cmNavigation:
        Height: =455
        setQuestionValue: |-
            =Set(
                navigationKey,
                qId
            );
            Set(
                questionKey,
                qId
            );
            With({getAnswerRecord:LookUp('仮説構築支援ツール - 回答',And(themeID=themeId,questionID=questionKey))},
            Reset(textAnswer);
            Reset(Checkbox1);
            Reset(Checkbox3);
            Set(
                currentAnswer,
                If(IsBlank(getAnswerRecord),"",getAnswerRecord.answer)
                );
            Set(
                skipFlag,
                getAnswerRecord.skip_flag
                );
            Set(
                noAnswerFlag,
                getAnswerRecord.no_answer_flag
                );
            );
            
            With({qRecord:LookUp(questionList, ID=questionKey)},
            Set(
                currentTitle,
                qRecord.Title
            );
            Set(
                currentQuestion,
                qRecord.question_content
            );
            Set(
                controlType,
                qRecord.control_type
            );
            Set(
                currentPage,
                qRecord.current_question_number
            );
            Set(
                totalPage,
                qRecord.question_totalnumber
            );
            Set(
                commentary,
                qRecord.commentary
            );
            Set(
                example,
                qRecord.example
            );
            Set(
                currentRequired,
                qRecord.required
            );
            Set(
                nextVisible,
                If(qRecord.next_question_id=0,false,true)
            
            );
            Set(
                confirmVisible,
                If(qRecord.next_question_id=0,true,false)
            );
            );
            Set(
                backVisible,
                false
            );
            Set(
                commentaryGroupVisible,
                true
            );
            Set(
                exampleGroupVisible,
                false
            );
            If(Not(currentRequired="2"),Set(currentQuestion,Concatenate(currentQuestion,"*")))
        X: =1106
        Y: =300
        ZIndex: =36

