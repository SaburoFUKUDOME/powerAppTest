screenCanvas_1 As screen:
    OnVisible: |
        =Set(navigationKey,0);
        Set(currentCategory,"");
        Set(answerList,'仮説構築支援ツール - 回答');
        Set(themeId,galleryTheme.Selected.ID);
        Set(pageKey,"canvas");

    MainContainer2_1 As groupContainer.manualLayoutContainer:
        Height: =Max(App.Height, App.MinScreenHeight)
        Width: =Max(App.Width, App.MinScreenWidth)
        ZIndex: =38

        cmHeader_5 As cmHeader:

        BodyContainer1_2 As groupContainer.manualLayoutContainer:
            Height: =MainContainer.Height-cmHeader_1.Height-HeaderContainer_2.Height-FooterContainer_2.Height
            Width: =Max(App.Width, App.MinScreenWidth)-NavigateContainer_2.Width
            Y: =cmHeader_1.Height+HeaderContainer_2.Height
            ZIndex: =2

            "Gallery1_1 As gallery.'BrowseLayout_Vertical_TwoTextOneImageVariant_ver4.0'":
                Height: =457
                Items: =Sort(Filter(answerList,And(themeID=themeId)),questionID)
                Layout: =Layout.Vertical
                TemplatePadding: =0
                TemplateSize: =156
                Width: =1005
                X: =84
                Y: =40
                ZIndex: =2

                Separator1_1 As rectangle:
                    Height: =1
                    OnSelect: =Select(Parent)
                    Width: =Parent.TemplateWidth
                    Y: =Parent.TemplateHeight - 1
                    ZIndex: =5

                Label1_1 As label:
                    Height: =51
                    OnSelect: =Select(Parent)
                    Overflow: =Overflow.Scroll
                    Text: =ThisItem.answer
                    Width: =961
                    X: =7
                    Y: =67
                    ZIndex: =6

                Label4_1 As label:
                    OnSelect: =Select(Parent)
                    Text: =Concatenate("後で答える：",If(ThisItem.skip_flag,"✔"))
                    X: =Label1_1.X
                    Y: =116
                    ZIndex: =8

                Label6_1 As label:
                    OnSelect: =Select(Parent)
                    Text: =Concatenate("回答しない：",If(ThisItem.no_answer_flag,"✔"))
                    Visible: =If(LookUp(questionList,ID=ThisItem.questionID).required="2",true)
                    X: =180
                    Y: =116
                    ZIndex: =9

                Label7_1 As label:
                    FontWeight: =FontWeight.Semibold
                    OnSelect: =Select(Parent)
                    Text: =Concatenate(LookUp(questionList,ID=ThisItem.questionID).category,LookUp(questionList,ID=ThisItem.questionID).current_question_number)
                    Width: =487
                    Y: =1
                    ZIndex: =10

                Label3_2 As label:
                    Color: =RGBA(255, 255, 255, 1)
                    Fill: =RGBA(220, 153, 153, 1)
                    FontWeight: =Semibold
                    Height: =26
                    OnSelect: =Select(Parent)
                    Size: =10
                    Text: ="必須"
                    Visible: =If(Not(LookUp(questionList,ID=ThisItem.questionID).required="2"),true)
                    Width: =46
                    X: =7
                    Y: =41
                    ZIndex: =11

                statusLabel_1 As label:
                    Align: =Center
                    BorderColor: =_cBaseColor
                    BorderThickness: =2
                    Fill: |-
                        =If(ThisItem.status = completeStatus,_cBaseColor,ThisItem.status = incompleteStatus,RGBA(200, 220, 255, 1),White)
                        //Set(_cBaseColor,RGBA(100, 149, 237, 1));
                    OnSelect: =Select(Parent)
                    Text: =ThisItem.status
                    Width: =40
                    X: =900
                    Y: =20
                    ZIndex: =12

                Label2_5 As label:
                    Height: =41
                    OnSelect: =Select(Parent)
                    Text: =ThisItem.Modified
                    Width: =284
                    X: =721
                    Y: =114
                    ZIndex: =13

        NavigateContainer_2 As groupContainer.manualLayoutContainer:
            Height: =BodyContainer1_2.Height
            Width: =MainContainer2_1.Width/6
            X: =MainContainer2_1.Width-MainContainer2_1.Width/6
            Y: =BodyContainer1_2.Y
            ZIndex: =4

            cmNavigation_2 As cmNavigation:
                Height: =455
                setQuestionValue: |-
                    =Set(
                        navigationKey,
                        qId
                    );
                    Set(
                        questionKey,
                        qId
                    );
                    With({getAnswerRecord:LookUp('仮説構築支援ツール - 回答',And(themeID=themeId,questionID=questionKey,add_answerID=addAnswerId))},
                    Reset(textAnswer);
                    Reset(skipAnswerCheckbox);
                    Reset(noAnswerCheckbox);
                    Set(
                        currentAnswer,
                        If(IsBlank(getAnswerRecord),"",getAnswerRecord.answer)
                        );
                    Set(
                        skipFlag,
                        getAnswerRecord.skip_flag
                        );
                    Set(
                        noAnswerFlag,
                        getAnswerRecord.no_answer_flag
                        );
                    );
                    
                    With({qRecord:LookUp(questionList, ID=questionKey)},
                    Set(
                        currentTitle,
                        qRecord.Title
                    );
                    Set(
                        currentQuestion,
                        qRecord.question_content
                    );
                    Set(currentCategory,qRecord.category);
                    Set(
                        controlType,
                        qRecord.control_type
                    );
                    Set(
                        currentPage,
                        qRecord.current_question_number
                    );
                    Set(
                        totalPage,
                        qRecord.question_totalnumber
                    );
                    Set(
                        commentary,
                        qRecord.commentary
                    );
                    Set(
                        example,
                        qRecord.example
                    );
                    Set(
                        currentRequired,
                        qRecord.required
                    );
                    Set(
                        nextVisible,
                        If(qRecord.next_question_id=0,false,true)
                    
                    );
                    Set(
                        confirmVisible,
                        If(qRecord.next_question_id=0,true,false)
                    );
                    );
                    Set(
                        backVisible,
                        false
                    );
                    Set(
                        commentaryGroupVisible,
                        true
                    );
                    Set(
                        exampleGroupVisible,
                        false
                    );
                    // 追加の問いフラグを初期化
                    If(
                        IsBlank(LookUp(_cCategory,Value=currentCategory)),
                        Set(
                            addAnswer,
                            false
                        );
                        Set(
                            addAnswerId,
                            0
                        );
                    );
                    If(Not(currentRequired="2"),Set(currentQuestion,Concatenate(currentQuestion,"*")))
                ZIndex: =1

        HeaderContainer_2 As groupContainer.manualLayoutContainer:
            Height: =66
            Width: =MainContainer2_1.Width
            Y: =cmHeader_5.Height
            ZIndex: =6

            lineContainer2_3 As groupContainer.verticalAutoLayoutContainer:
                Height: =66
                LayoutDirection: =LayoutDirection.Vertical
                LayoutMode: =LayoutMode.Auto
                Width: =HeaderContainer_2.Width
                X: =30
                ZIndex: =1

                Label2_6 As label:
                    FontWeight: =FontWeight.Bold
                    Height: =44
                    Size: =16
                    Text: ="Ｑ&Ａフローシステム"
                    Width: =400
                    X: =50
                    Y: =461
                    ZIndex: =1

                Rectangle3_5 As rectangle:
                    BorderColor: =_cBaseColor
                    Fill: =_cBaseColor
                    Height: =4
                    Width: =Max(App.Width-60, App.MinScreenWidth-60)
                    X: =50
                    Y: =505
                    ZIndex: =2

            statusBar_4 As cmStatusBar:
                Width: =600
                X: =HeaderContainer_2.Width/3
                ZIndex: =2

        FooterContainer_2 As groupContainer.manualLayoutContainer:
            Height: =70
            Width: =Max(App.Width, App.MinScreenWidth)-NavigateContainer_2.Width
            Y: =MainContainer.Height-70
            ZIndex: =7

            ContainerFooter_1 As groupContainer.horizontalAutoLayoutContainer:
                Height: =FooterContainer_2.Height
                LayoutGap: =50
                LayoutMode: =LayoutMode.Auto
                Width: =FooterContainer_2.Width
                X: =50
                ZIndex: =6

                IconBackThemeScreen_1 As icon.BackArrow:
                    Color: =_cBaseColor
                    Height: =40
                    Icon: =Icon.BackArrow
                    OnSelect: =Navigate(screenTheme,Fade)
                    Tooltip: ="テーマ一覧へ戻る"
                    Width: =40
                    ZIndex: =1

                ButtonEntireDisplay_1 As button:
                    BorderColor: =_cBaseColor
                    BorderThickness: =0
                    Fill: =_cBaseColor
                    HoverFill: =ColorFade(_cBaseColor,-20%)
                    OnSelect: =Navigate(ScreenEntireDisplay)
                    RadiusBottomLeft: =20
                    RadiusBottomRight: =20
                    RadiusTopLeft: =20
                    RadiusTopRight: =20
                    Text: ="全体表示"
                    X: =111
                    ZIndex: =2

