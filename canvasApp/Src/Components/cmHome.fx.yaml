cmHome As CanvasComponent:
    moveQuestion(qid As Number, addAnswerFlag As Boolean, addAnswerId As Number, addCategory As String):
        qid:
            Default: =100
        addAnswerFlag:
            Default: =true
        addAnswerId:
            Default: =100
        addCategory:
            Default: ="テキスト"
        ThisProperty:
            Default: |-
                =If(addAnswerFlag,
                With(
                    {
                        getAnswerRecord: LookUp(
                            '仮説構築支援ツール - 回答',
                            And(
                                themeID = themeId,
                                questionID = questionKey,
                                add_answerID = addAnswerId
                            )
                        )
                    },
                    If(IsBlank(getAnswerRecord),
                    Patch('仮説構築支援ツール - 回答',
                    Defaults('仮説構築支援ツール - 回答'),
                    {
                        themeID: themeId,
                        questionID: qid,
                        category: addCategory,
                        answer:"",
                        skip_flag: false,
                        no_answer_flag:false,
                        status:0,
                        add_answerID:addAnswerId
                    }
                    )
                
                ));
                Set(addAnswer,true);
                Set(addAnswerId,addAnswerId),
                Set(addAnswerId,0));
                
                
                //問いへ遷移
                Set(
                    navigationKey,
                    qid
                );
                Set(
                    questionKey,
                    qid
                );
                With({getAnswerRecord:LookUp('仮説構築支援ツール - 回答',And(themeID=themeId,questionID=questionKey,add_answerID=addAnswerId))},
                Reset(textAnswer);
                Reset(skipAnswerCheckbox);
                Reset(noAnswerCheckbox);
                Set(
                    currentAnswer,
                    If(IsBlank(getAnswerRecord),"",getAnswerRecord.answer)
                    );
                Set(
                    skipFlag,
                    getAnswerRecord.skip_flag
                    );
                Set(
                    noAnswerFlag,
                    getAnswerRecord.no_answer_flag
                    );
                );
                
                With({qRecord:LookUp(questionList, ID=questionKey)},
                Set(
                    currentTitle,
                    qRecord.Title
                );
                Set(
                    currentQuestion,
                    qRecord.question_content
                );
                Set(currentCategory,qRecord.category);
                Set(
                    controlType,
                    qRecord.control_type
                );
                Set(
                    currentPage,
                    qRecord.current_question_number
                );
                Set(
                    totalPage,
                    qRecord.question_totalnumber
                );
                Set(
                    commentary,
                    qRecord.commentary
                );
                Set(
                    example,
                    qRecord.example
                );
                Set(
                    currentRequired,
                    qRecord.required
                );
                Set(
                    nextVisible,
                    If(qRecord.next_question_id=0,false,true)
                
                );
                Set(
                    confirmVisible,
                    If(qRecord.next_question_id=0,true,false)
                );
                );
                Set(
                    backVisible,
                    false
                );
                Set(
                    commentaryGroupVisible,
                    true
                );
                Set(
                    exampleGroupVisible,
                    false
                );
                If(Not(currentRequired="2"),Set(currentQuestion,Concatenate(currentQuestion,"*")));
                Navigate(
                    scrennQuestion,
                    ScreenTransition.Fade
                );
    Fill: =RGBA(0, 0, 0, 0)
    Height: =632
    Width: =1138
    X: =0
    Y: =0
    ZIndex: =4

    LabelCategory1 As label:
        BorderThickness: =1
        Fill: |-
            =With({categoryQuestionCount:CountIf(questionList,category="顧客"),
            answerTable:Filter('仮説構築支援ツール - 回答',And(category="顧客",themeID=themeId))},
            If(CountIf(answerTable,status=completeStatus)=categoryQuestionCount,_cBaseColor,
            CountIf(answerTable,(status=incompleteStatus)||(status=completeStatus))>noneStatus,
            RGBA(200,220,255,1),RGBA(245,245,245,1)))
        Height: =404
        OnSelect: =cmHome.moveQuestion(3,false,0);
        Text: =
        Width: =96
        X: =1002
        Y: =153
        ZIndex: =1

    LabelCategory2 As label:
        BorderThickness: =1
        Fill: |-
            =With({categoryQuestionCount:CountIf(questionList,category="目的（JTBD）"),
            answerTable:Filter('仮説構築支援ツール - 回答',And(category="目的（JTBD）",themeID=themeId))},
            If(CountIf(answerTable,status=completeStatus)=categoryQuestionCount,_cBaseColor,
            CountIf(answerTable,(status=incompleteStatus)||(status=completeStatus))>noneStatus,
            RGBA(200,220,255,1),RGBA(245,245,245,1)))
        Height: =404
        OnSelect: =cmHome.moveQuestion(6,false,0);
        Text: =
        Width: =96
        X: =845
        Y: =153
        ZIndex: =2

    LabelCategory7 As label:
        BorderThickness: =1
        Fill: |-
            =With({categoryQuestionCount:CountIf(questionList,category="MVP（ソリューション）"),
            answerTable:Filter('仮説構築支援ツール - 回答',And(category="MVP（ソリューション）",themeID=themeId))},
            If(CountIf(answerTable,status=completeStatus)=categoryQuestionCount,_cBaseColor,
            CountIf(answerTable,(status=incompleteStatus)||(status=completeStatus))>noneStatus,
            RGBA(200,220,255,1),RGBA(245,245,245,1)))
        Height: =404
        OnSelect: =cmHome.moveQuestion(19,false,0);
        Text: =
        Width: =96
        X: =71
        Y: =153
        ZIndex: =3

    "GalleryCategory As gallery.'BrowseLayout_Horizontal_TwoTextOneImageVariant_ver4.0'":
        Height: =112
        Items: =Sort(Filter(navigationList,Not(Title="前提条件")),ID,Descending)//)
        ShowScrollbar: =false
        TemplatePadding: =0
        TemplateSize: =153
        Width: =1042
        X: =62
        Y: =41
        ZIndex: =4

        LabelCategoryName As label:
            Align: =Align.Center
            Height: =35
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =12
            Text: =ThisItem.Title
            VerticalAlign: =VerticalAlign.Top
            Width: =113
            X: =9
            Y: =15
            ZIndex: =2

    "GalleryAddQuestion As gallery.'BrowseLayout_Flexible_SocialFeed_ver4.0'":
        Height: =400
        Items: =Sort(Filter('仮説構築支援ツール - 追加の問い',themeID=themeId),sort_order)
        Layout: =Layout.Vertical
        TemplatePadding: =4
        TemplateSize: |-
            =400
            //Min(870, Self.Height - 60)
        Width: =621
        X: =202
        Y: =153
        ZIndex: =5

        LabelCategory3 As label:
            BorderThickness: =1
            Fill: |-
                =With({answerTable:Filter('仮説構築支援ツール - 回答',And(questionID=7,themeID=themeId,add_answerID=ThisItem.ID))},
                If(CountIf(answerTable,status=completeStatus),_cBaseColor,
                CountIf(answerTable,(status=incompleteStatus)||(status=completeStatus))>noneStatus,
                RGBA(200,220,255,1),RGBA(245,245,245,1)))
            Height: =96
            OnSelect: =cmHome.moveQuestion(7,true,ThisItem.ID,"阻害要因（課題）");
            Text: =
            Width: =96
            X: =492
            Y: =63
            ZIndex: =5

        LabelCategory4 As label:
            BorderThickness: =1
            Fill: |-
                =With({answerTable:Filter('仮説構築支援ツール - 回答',And(questionID=11,themeID=themeId,add_answerID=ThisItem.ID))},
                If(CountIf(answerTable,status=completeStatus),_cBaseColor,
                CountIf(answerTable,(status=incompleteStatus)||(status=completeStatus))>noneStatus,
                RGBA(200,220,255,1),RGBA(245,245,245,1)))
            Height: =96
            OnSelect: =cmHome.moveQuestion(11,true,ThisItem.ID,"現状対策（代替）");
            Text: =
            Width: =96
            X: =348
            Y: =63
            ZIndex: =6

        LabelCategory5 As label:
            BorderThickness: =1
            Fill: |-
                =With({answerTable:Filter('仮説構築支援ツール - 回答',And(questionID=14,themeID=themeId,add_answerID=ThisItem.ID))},
                If(CountIf(answerTable,status=completeStatus),_cBaseColor,
                CountIf(answerTable,(status=incompleteStatus)||(status=completeStatus))>noneStatus,
                RGBA(200,220,255,1),RGBA(245,245,245,1)))
            Height: =96
            OnSelect: =cmHome.moveQuestion(14,true,ThisItem.ID,"満足状況");
            Text: =
            Width: =96
            X: =203
            Y: =63
            ZIndex: =7

        IconLeft As icon.ChevronLeft:
            Height: =50
            Icon: =Icon.ChevronLeft
            OnSelect: =Select(Parent)
            Width: =66
            X: =117
            Y: =81
            ZIndex: =8

        LabelCategory6 As label:
            BorderThickness: =1
            Fill: |-
                =With({answerTable:Filter('仮説構築支援ツール - 回答',And(questionID=18,themeID=themeId,add_answerID=ThisItem.ID))},
                If(CountIf(answerTable,status=completeStatus),_cBaseColor,
                CountIf(answerTable,(status=incompleteStatus)||(status=completeStatus))>noneStatus,
                RGBA(200,220,255,1),RGBA(245,245,245,1)))
            Height: =96
            OnSelect: =cmHome.moveQuestion(18,true,ThisItem.ID,"提供価値");
            Text: =
            Width: =96
            X: =21
            Y: =63
            ZIndex: =9

        IconDelete As icon.CancelBadge:
            Height: =36
            Icon: =Icon.CancelBadge
            OnSelect: |-
                =Set(_gDeleteId,ThisItem.ID);
                Set(_gIsDelete,true);
                //Remove('仮説構築支援ツール - 回答',Filter('仮説構築支援ツール - 回答',add_answerID=ThisItem.ID));
                //Remove('仮説構築支援ツール - 追加の問い',ThisItem);
            Visible: =If(ThisItem.sort_order=1, false, true)
            Width: =42
            X: =11
            Y: =14
            ZIndex: =10

        IconDown As icon.Hamburger:
            Height: =36
            Icon: =Icon.ChevronDown
            OnSelect: |-
                =UpdateIf('仮説構築支援ツール - 追加の問い', sort_order=ThisItem.sort_order+1, {sort_order:ThisItem.sort_order});
                UpdateIf('仮説構築支援ツール - 追加の問い',ID=ThisItem.ID,{sort_order:ThisItem.sort_order+1});
            Visible: =If(ThisItem.sort_order=First(Sort(Filter('仮説構築支援ツール - 追加の問い',themeID=themeId),sort_order,Descending)).sort_order, false, true)
            Width: =42
            X: =537
            Y: =14
            ZIndex: =11

        ButtonAddQuestion As button:
            Color: =_cBaseColor
            Fill: =RGBA(245,245,245,1)
            Height: =81
            OnSelect: |-
                =Set(maxSortNumber,First(Sort(Filter('仮説構築支援ツール - 追加の問い',themeID=themeId),sort_order,Descending)).sort_order);
                Collect('仮説構築支援ツール - 追加の問い',{themeID:themeId,sort_order:maxSortNumber+1});
            Text: ="＋追加"
            Visible: =If(And(First(Sort(Filter('仮説構築支援ツール - 追加の問い',themeID=themeId),sort_order,Descending)).sort_order=ThisItem.sort_order,CountRows(Filter('仮説構築支援ツール - 追加の問い',themeID=themeId).ID)<5),true)
            Width: =567
            X: =21
            Y: =196
            ZIndex: =12

        IconUp As icon.Hamburger:
            Height: =36
            Icon: =Icon.ChevronUp
            OnSelect: |-
                =UpdateIf('仮説構築支援ツール - 追加の問い', sort_order=ThisItem.sort_order-1, {sort_order:ThisItem.sort_order});
                UpdateIf('仮説構築支援ツール - 追加の問い',ID=ThisItem.ID,{sort_order:ThisItem.sort_order-1});
            Visible: =If(ThisItem.sort_order=1, false, true)
            Width: =42
            X: =483
            Y: =14
            ZIndex: =13

    GroupDeleteConfirm As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =12

        Rectangle1_2 As rectangle:
            BorderColor: =RGBA(0, 0, 0, 1)
            BorderThickness: =1
            Fill: =RGBA(0, 0, 0, 0.2)
            Height: =620
            Visible: =If(_gIsDelete,true,false)
            Width: =1138
            ZIndex: =6

        Rectangle1 As rectangle:
            BorderColor: =RGBA(0, 0, 0, 1)
            BorderThickness: =1
            Fill: =RGBA(255, 255, 255, 1)
            Height: =208
            Visible: =If(_gIsDelete,true,false)
            Width: =395
            X: =313
            Y: =200
            ZIndex: =7

        LabelConfirmMessage As label:
            Text: ="削除しますか？"
            Visible: =If(_gIsDelete,true,false)
            X: =437
            Y: =258
            ZIndex: =8

        ButtonDelete As button:
            Fill: =_cBaseColor
            Height: =35
            OnSelect: |-
                =If(
                    Not(IsBlank(LookUp('仮説構築支援ツール - 回答',add_answerID=_gDeleteId))),
                    Remove('仮説構築支援ツール - 回答',Filter('仮説構築支援ツール - 回答',add_answerID=_gDeleteId));
                );
                Remove('仮説構築支援ツール - 追加の問い',LookUp('仮説構築支援ツール - 追加の問い',ID=_gDeleteId));
                Set(_gIsDelete,false)
            Size: =12
            Text: ="削除"
            Visible: =If(_gIsDelete,true,false)
            Width: =100
            X: =371
            Y: =340
            ZIndex: =9

        ButtonCancel As button:
            Fill: =_cBaseColor
            Height: =35
            OnSelect: =Set(_gIsDelete,false)
            Size: =12
            Text: ="キャンセル"
            Visible: =If(_gIsDelete,true,false)
            Width: =100
            X: =547
            Y: =340
            ZIndex: =10

